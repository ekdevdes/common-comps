!function(t){var e=t("select[data-dropdown-options]"),a={},o={},n={};t.each(e,function(e,n){var s=t(n),d="dropdown-"+s.attr("name");rawOptions=s.attr("data-dropdown-options").split(","),opts={},t.each(rawOptions,function(t,e){var a=e.split("=")[0].trim(),o=e.split("=")[1];"keep"==a?"yes"==o.toLowerCase()||"true"==o.toLowerCase()||"keep"==o.toLowerCase()?opts[a.toLowerCase()]="true":opts[a.toLowerCase()]="false":opts[a.toLowerCase()]=o}),a[d]=opts,o["dropdown-"+s.attr("name")]=s.data("dropdown-container")}),t.each(o,function(e,o){var n=a[e];void 0==n.defaultval&&(n.defaultval="Choose an Option"),t("<div class='dropdown "+e+"' data-selected data-state='closed'><div class='control'><span>"+n.defaultval+"</span></div><div class='opts'></div>").appendTo(n.container)}),t.each(e,function(e,o){var s=t(o),d=s.children(),r="",l="dropdown-"+s.attr("name");r+="<ul>",t.each(d,function(e,a){var o=t(a);r+="<li data-name='"+o.text().toLowerCase().replace(/\s/g,"")+"'><span>"+o.text()+"</span></li>"}),r+="</ul>",n[l]=r,"true"!=a[l].keep&&s.hide()}),t.each(o,function(e,a){t(n[e]).appendTo("."+e+" .opts")}),t(".dropdown .control").click(function(e){e.preventDefault();var a=t(this).parent(),o=(a.find(".control"),a.find(".opts"));return"closed"==a.attr("data-state")?(o.fadeIn("fast"),a.attr("data-state","opened")):(o.fadeOut("fast"),a.attr("data-state","closed")),!1}),t(".dropdown .opts li").click(function(e){e.preventDefault();var a=t(this).parent().parent().parent(),o=a.find(".opts"),n=t(this),s=a.attr("class").split(" ")[1].split("-")[1],d=t('select[name="'+s+'"]'),r=n.html().replace(/(<([^>]+)>)/gi,"");return t.each(a.find("li"),function(e,a){t(a).removeClass("selected")}),n.addClass("selected"),o.fadeOut("fast"),a.attr("data-state","closed"),t.each(d.children(),function(e,a){var o=t(a),n=o.html();o.removeAttr("selected"),n==r&&o.attr("selected","selected")}),a.attr("data-selected",n.attr("data-name")),a.find(".control span").text(r),!1}),t.each(e,function(e,o){var n=t(o),s="dropdown-"+n.attr("name"),d=a[s];if(void 0!==d.selectedval&&""!=d.selectedval){var r,l,c=d.selectedval,i=t(" ."+s);t.each(i.find("li"),function(e,a){var o=t(a),n=t(a).text().replace(/(<([^>]+)>)/gi,"");o.removeClass("selected"),n==c&&(r=o,l=r.text().replace(/(<([^>]+)>)/gi,""))}),i.find(".control span").text(l),r.addClass("selected"),t.each(n.children(),function(e,a){var o=t(a),n=o.html();o.removeAttr("selected"),n==l&&o.attr("selected","selected")})}})}(jQuery);
